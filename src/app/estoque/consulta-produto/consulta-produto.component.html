<div class="p-6">
  <h1 class="mb-4 text-2xl font-semibold">
    Lista de Produtos
  </h1>

  <button
    class="mb-4 rounded bg-green-600 px-3 py-1 text-sm text-white hover:bg-green-700"
    (click)="novoProduto()"
  >
    Novo Produto
  </button>

  @if (isLoading()) {
    <p class="text-sm">
      Carregando...
    </p>
  } @else if (error()) {
    <p class="text-sm">
      {{ error() }}
    </p>
  } @else {
    <div class="overflow-x-auto rounded-lg border">
      <table class="min-w-full divide-y">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider">
              ID
            </th>
            <th class="px-4 py-2 text-left text-xs font-medium uppercase tracking-wider">
              Nome
            </th>
            <th class="px-4 py-2 text-right text-xs font-medium uppercase tracking-wider">
              Preço
            </th>
            <th class="px-4 py-2 text-right text-xs font-medium uppercase tracking-wider">
              Estoque
            </th>
            <th class="px-4 py-2 text-right text-xs font-medium uppercase tracking-wider">
              Ações
            </th>
          </tr>
        </thead>
        <tbody class="divide-y">
          @for (produto of listaProdutos(); track produto.id) {
            <tr class="hover:bg-gray-50">
              <td class="whitespace-nowrap px-4 py-2 text-sm">
                {{ produto.id }}
              </td>
              <td class="whitespace-nowrap px-4 py-2 text-sm">
                {{ produto.nome }}
              </td>
              <td class="whitespace-nowrap px-4 py-2 text-sm text-right">
                {{ produto.preco| number: '1.2-2' }}
              </td>
              <td class="whitespace-nowrap px-4 py-2 text-sm text-right">
                {{ produto.estoqueAtual }}
              </td>
              <td class="whitespace-nowrap px-4 py-2 text-sm text-right">
                <button
                  class="rounded bg-blue-600 px-3 py-1 text-sm text-white hover:bg-blue-700"
                  (click)="preparaEditar(produto.id)"
                >
                  Editar
                </button>
              </td>
              <td class="whitespace-nowrap px-4 py-2 text-sm text-right">
                <button
                  class="rounded bg-red-600 px-3 py-1 text-sm text-white hover:bg-red-700"
                  (click)="excluirProduto(produto.id)"
                >
                  Excluir
                </button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="px-4 py-4 text-center text-sm">
                Nenhum produto encontrado.
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
